<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>April Investments</title>
    <style>
        /* Your existing CSS styles */
    </style>
</head>
<body>
    <header>
        <h1>April Investments</h1>
    </header>
    <nav>
        <a href="#home">Home</a>
        <a href="#products">Products</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
        <a href="#whitepaper">Whitepaper</a>
        <a href="#crypto-savings-account">Crypto Savings Account</a>
    </nav>
    <div class="container">
        <section id="home">
            <h2>Welcome to April Investments</h2>
            <p>Your trusted partner in financial growth and security.</p>
        </section>
        <section id="products">
            <h2>Our Products</h2>
            <p>We offer the perfect range of investment options tailored to meet your needs.</p>
        </section>
        <section id="about">
            <h2>About April Investments</h2>
            <p>April Investments is shaping the future of finance...</p>
        </section>
        <section id="contact">
            <h2>Contact Us</h2>
            <p>Email us at josh@april-investments.com</p>
        </section>
        <section id="whitepaper">
            <h2>April Investments Whitepaper</h2>
            <p>April Investments is the investment firm of the future...</p>
        </section>
        <section id="crypto-savings-account">
            <h5><span class="smaller-bold">Crypto Savings Account</span></h5>
            <p>The Crypto Savings Account pays the investor 50% APY on deposit value...</p>
            <button class="open-button" onclick="openDepositForm()">Deposit SOL</button>
            <div class="form-popup" id="depositForm">
                <form class="form-container">
                    <h2>Deposit SOL</h2>
                    <button type="button" class="btn" onclick="connectWallet()">Connect Wallet</button>
                    <label for="wallet"><b>Phantom Wallet Address</b></label>
                    <input type="text" id="wallet" placeholder="Enter Phantom Wallet Address" required>
                    <label for="amount"><b>Amount in SOL</b></label>
                    <input type="text" id="amount" placeholder="Enter Amount in SOL" required>
                    <label for="destWallet"><b>Destination Wallet for DogCoin</b></label>
                    <input type="text" id="destWallet" placeholder="Enter Destination Wallet Address" required>
                    <button type="button" class="btn" onclick="depositSol()">Submit</button>
                    <button type="button" class="btn cancel" onclick="closeDepositForm()">Close</button>
                </form>
            </div>
            <button class="open-button" onclick="openCloseAccountForm()">Close Account</button>
            <div class="form-popup" id="closeAccountForm">
                <form class="form-container">
                    <h2>Close Account</h2>
                    <button type="button" class="btn" onclick="connectWallet()">Connect Wallet</button>
                    <label for="percentage"><b>Select Percentage to Close</b></label>
                    <select id="percentage" required>
                        <option value="25">25%</option>
                        <option value="50">50%</option>
                        <option value="75">75%</option>
                        <option value="100">100%</option>
                    </select>
                    <label for="closeWallet"><b>Phantom Wallet Address for SOL and DogCoin</b></label>
                    <input type="text" id="closeWallet" placeholder="Enter Wallet Address" required>
                    <button type="button" class="btn" onclick="closeAccount()">Submit</button>
                    <button type="button" class="btn cancel" onclick="closeCloseAccountForm()">Close</button>
                </form>
            </div>
        </section>
        <p>Follow April Investments on X @AprilInvestment</p>
    </div>
    <footer>
        <p>April Investments Â© 2024</p>
    </footer>

    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@raydium-io/raydium@latest/lib/index.iife.min.js"></script>
    <script>
        const APRIL_INVESTMENTS_WALLET = "DXXmtxAVkZ4orFy79kmrzB27dz7uibpdkVYWzYZzGDBz";
        const DOGCOIN_MINT_ADDRESS = "97yYAinaQBTEmAGGnbaR9FGm7W7eimKJgzRCnv2vC6ga";
        const RAYDIUM_AMM_ID = "FxsxhP9xEknD8jbzfcHZdJfRpG5ZJdGQdxH1WwnCCd5B"; // Replace with the actual AMM ID for the token pair

        let provider = null;
        let wallet = null;

        function openDepositForm() {
            document.getElementById("depositForm").style.display = "block";
        }

        function closeDepositForm() {
            document.getElementById("depositForm").style.display = "none";
        }

        function openCloseAccountForm() {
            document.getElementById("closeAccountForm").style.display = "block";
        }

        function closeCloseAccountForm() {
            document.getElementById("closeAccountForm").style.display = "none";
        }

        async function connectWallet() {
            try {
                if (window.solana && window.solana.isPhantom) {
                    provider = window.solana;
                    await provider.connect();
                    wallet = provider.publicKey;
                    alert(`Connected to wallet: ${wallet.toString()}`);
                } else {
                    alert("Please install the Phantom Wallet");
                }
            } catch (error) {
                console.error("Error connecting to wallet:", error);
                alert("There was an error connecting to your wallet. Please try again.");
            }
        }

        async function depositSol() {
            const walletAddress = document.getElementById('wallet').value;
            const amount = document.getElementById('amount').value;
            const destWallet = document.getElementById('destWallet').value;

            if (!walletAddress || !amount || !destWallet) {
                alert("Please fill in all fields");
                return;
            }

            if (!wallet) {
                alert("Please connect your wallet first");
                return;
            }

            try {
                const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'), 'confirmed');
                const totalLamports = solanaWeb3.LAMPORTS_PER_SOL * amount;

                let transaction = new solanaWeb3.Transaction().add(
                    solanaWeb3.SystemProgram.transfer({
                        fromPubkey: wallet,
                        toPubkey: new solanaWeb3.PublicKey(walletAddress),
                        lamports: totalLamports
                    })
                );
                let signature = await provider.signAndSendTransaction(transaction);
                await connection.confirmTransaction(signature);

                alert("Deposit successful! Your SOL has been deposited to the liquidity pool.");
                await swapAndAddLiquidity(amount);

                closeDepositForm();
            } catch (error) {
                console.error("Error depositing SOL:", error);
                alert("There was an error with your deposit. Please try again.");
            }
        }

        async function swapAndAddLiquidity(amount) {
            try {
                const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'), 'confirmed');

                // Raydium SDK usage example
                const raydium = window.raydium; // Access Raydium SDK from global scope

                // Fetch the token mint addresses for SOL and DOG (DogCoin)
                const SOL_MINT = new solanaWeb3.PublicKey("So11111111111111111111111111111111111111112"); // SOL mint address
                const DOG_MINT = new solanaWeb3.PublicKey(DOGCOIN_MINT_ADDRESS);

                // Define the AMM pool for swapping
                const pool = await raydium.getAmmPool(connection, RAYDIUM_AMM_ID);

                // Example: Create swap transaction
                const swapTransaction = raydium.createSwapTransaction(
                    connection,
                    wallet,
                    pool,
                    SOL_MINT,
                    DOG_MINT,
                    amount
                );

                // Sign and send transaction
                const swapSignature = await provider.signAndSendTransaction(swapTransaction);
                await connection.confirmTransaction(swapSignature);

                // Example: Add liquidity transaction
                const liquidityTransaction = raydium.createAddLiquidityTransaction(
                    connection,
                    wallet,
                    pool,
                    SOL_MINT,
                    DOG_MINT,
                    amount
                );

                // Sign and send liquidity transaction
                const liquiditySignature = await provider.signAndSendTransaction(liquidityTransaction);
                await connection.confirmTransaction(liquiditySignature);

                alert("Swap and liquidity addition successful!");
            } catch (error) {
                console.error("Error swapping tokens and adding liquidity:", error);
                alert("There was an error with swapping tokens and adding liquidity. Please try again.");
            }
        }

        async function closeAccount() {
            const percentage = document.getElementById('percentage').value;
            const closeWallet = document.getElementById('closeWallet').value;

            if (!percentage || !closeWallet) {
                alert("Please fill in all fields");
                return;
            }

            if (!wallet) {
                alert("Please connect your wallet first");
                return;
            }

            try {
                const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'), 'confirmed');
                const totalAccountLamports = 1000000; // Replace with actual logic to fetch balance
                const percentageLamports = (totalAccountLamports * percentage) / 100;

                let transaction = new solanaWeb3.Transaction().add(
                    solanaWeb3.SystemProgram.transfer({
                        fromPubkey: wallet,
                        toPubkey: new solanaWeb3.PublicKey(closeWallet),
                        lamports: percentageLamports
                    })
                );
                let signature = await provider.signAndSendTransaction(transaction);
                await connection.confirmTransaction(signature);

                alert(`Account closed successfully! ${percentage}% of your SOL funds have been withdrawn and sent to ${closeWallet}.`);
                closeCloseAccountForm();
            } catch (error) {
                console.error("Error closing account:", error);
                alert("There was an error closing your account. Please try again.");
            }
        }
    </script>
</body>
</html>

